---
import DefaultLayout from "../../layouts/DefaultLayout.astro";
import PageHeader from "../../components/PageHeader.astro";
import ModuleRenderer from "../../components/ModuleRenderer.astro";
import work from "../../data/work";
import type { Work } from "../../models/work";

export async function getStaticPaths() {
  return work.map((item) => ({
    params: { slug: item.slug },
    props: { ...item }
  }));
}

// TypeScript complains without this, even though props come from getStaticPaths
const { name, modules } = Astro.props as Work;
---

<DefaultLayout title={`Thomas Lamars | ${name}`}>
  <PageHeader title={name} marginSize="sub-page" />

  {modules.map((module) => <ModuleRenderer module={module} />)}
</DefaultLayout>
